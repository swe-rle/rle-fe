
<script src="https://accounts.google.com/gsi/client" async defer></script>
<script>
  function parseJwt (token) {
  var base64Url = token.split('.')[1];
  var base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
  var jsonPayload = decodeURIComponent(window.atob(base64).split('').map(function(c) {
      return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
  }).join(''));

  return JSON.parse(jsonPayload);
}

  function handleCredentialResponse(response) {
  // decodeJwtResponse() is a custom function defined by you
  // to decode the credential response.
  const responsePayload = parseJwt(response.credential);
  console.log(responsePayload,response.credential)
  console.log("ID: " + responsePayload.sub);
  console.log('Full Name: ' + responsePayload.name);
  console.log('Given Name: ' + responsePayload.given_name);
  console.log('Family Name: ' + responsePayload.family_name);
  console.log("Image URL: " + responsePayload.picture);
  console.log("Email: " + responsePayload.email);
  fetch("http://localhost:8000/auth/signin", {
  method: "POST",
  body: JSON.stringify({
    lab_id: 6,
    g_token: response.credential,
  }),
  headers: {
    "Content-type": "application/json; charset=UTF-8"
  }
});
  }
</script>
<header id="header" class="fixed-top d-flex align-items-center">
    <div class="container d-flex align-items-center justify-content-between">

      <div class="logo">
        <!-- <h1 class="text-light"><a href="index.html"></a></h1> -->
        <!-- Uncomment below if you prefer to use an image logo -->
        <a (click)="setId(1)" routerLink="home" style="color: black;"><img [src]="headerData?.logo" alt="" class="img-fluid"> <span style="font-size: larger; font-weight: bolder;">{{headerData?.lab_name}}</span></a>
      </div>

      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="nav-link scrollto" (click)="setId(1)" [ngClass]="{'active': id === 1 }" routerLink="home">Home</a></li>
          <li><a class="nav-link scrollto" (click)="setId(2)" [ngClass]="{'active': id === 2 }" routerLink="people">People</a></li>
          <li><a class="nav-link scrollto" (click)="setId(3)" [ngClass]="{'active': id === 3 }" routerLink="research">Research</a></li>
          <li><a class="nav-link scrollto" (click)="setId(4)" [ngClass]="{'active': id === 4 }" routerLink="gallery">Gallery</a></li>
          <li class="dropdown"><a (click)="setId(5)" [ngClass]="{'active': id ==  5 }"><span>More</span> <i class="bi bi-chevron-down"></i></a>
            <ul>
              <li><a  routerLink="research/publications" (click)="setId(5)">Publications</a></li>
              <li><a  routerLink="research/conferences" (click)="setId(5)">Conferences</a></li>
            </ul>
          </li>
          <li><a class="nav-link scrollto" 
             id="g_id_onload"
            data-client_id="658208509868-eobuvr8pnb5k1knq91cq27tl794rp67l.apps.googleusercontent.com"
            data-context="signin"
            data-ux_mode="popup"
            data-callback="handleCredentialResponse"
            data-nonce=""
            data-itp_support="true"></a></li>
            <div class="g_id_signin"
        data-type="standard"
        data-shape="pill"
        data-theme="outline"
        data-text="continue_with"
        data-size="large"
        data-logo_alignment="left">
   </div>
        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->

    </div>
  </header>

